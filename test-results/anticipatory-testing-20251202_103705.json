{
  "timestamp": "2025-12-02T10:37:04.094590",
  "test_type": "anticipatory_testing",
  "project_root": "/Users/peter/github/opencode-workflow-kit",
  "suites": {
    "integration_contracts": {
      "tests_run": 0,
      "failures": 0,
      "errors": 1,
      "success_rate": 0,
      "parsed_output": false,
      "suite_name": "integration_contracts",
      "success": false,
      "duration_seconds": 1.3652310371398926,
      "critical": true,
      "stdout": "\ud83e\uddea Running Integration Contract Tests\n==================================================\n\n\ud83d\udcca Test Results:\n  Tests run: 15\n  Failures: 2\n  Errors: 0\n  Success rate: 86.7%\n\n\u274c Failures:\n  \u2022 test_beads_version_contract (__main__.TestBeadsContract): Expected 'run' to be called once. Called 2 times.\nCalls: [call(['bd', '--version'], check=True, capture_output=True, timeout=5, cwd=PosixPath('/var/folders/n6/4nb1pqwj7gl675t1jvxlml_m0000gn/T/tmpms_ojebm')),\n call(['bd', '--version'], check=True, capture_output=True, timeout=5, cwd=PosixPath('/var/folders/n6/4nb1pqwj7gl675t1jvxlml_m0000gn/T/tmpms_ojebm'))].\n  \u2022 test_graceful_degradation_contract (__main__.TestIntegrationContract): True is not false : Should report beads as unavailable\n\n\ud83d\udcc4 Results saved to: test-results/integration-contracts-20251202_103705.json\n",
      "stderr": "test_beads_data_format_contract (__main__.TestBeadsContract)\nTest Beads JSONL follows expected data format. ... ok\ntest_beads_version_contract (__main__.TestBeadsContract)\nTest bd --version follows expected contract. ... FAIL\ntest_beads_version_failure (__main__.TestBeadsContract)\nTest graceful handling when bd command fails. ... ok\ntest_beads_version_missing (__main__.TestBeadsContract)\nTest graceful handling when bd command missing. ... ok\ntest_cody_agent_config_contract (__main__.TestCodyContract)\nTest Cody agent configurations follow expected format. ... ok\ntest_cody_feature_backlog_contract (__main__.TestCodyContract)\nTest Cody feature-backlog.md follows expected format. ... ok\ntest_cody_structure_contract (__main__.TestCodyContract)\nTest Cody PBT follows expected directory structure. ... ok\ntest_cody_structure_missing (__main__.TestCodyContract)\nTest graceful handling when Cody structure missing. ... ok\ntest_adapter_logging_contract (__main__.TestIntegrationContract)\nTest adapter logging follows expected format. ... ok\ntest_graceful_degradation_contract (__main__.TestIntegrationContract)\nTest graceful degradation when systems unavailable. ... FAIL\ntest_non_blocking_contract (__main__.TestIntegrationContract)\nTest integration operations never block. ... ok\ntest_system_status_contract (__main__.TestIntegrationContract)\nTest system status follows expected format. ... ok\ntest_beads_jsonl_contract_violation (__main__.TestContractViolations)\nTest detection of Beads JSONL contract violations. ... ok\ntest_cody_backlog_contract_violation (__main__.TestContractViolations)\nTest detection of Cody backlog contract violations. ... ok\ntest_version_compatibility_violation (__main__.TestContractViolations)\nTest detection of version compatibility violations. ... ok\n\n======================================================================\nFAIL: test_beads_version_contract (__main__.TestBeadsContract)\nTest bd --version follows expected contract.\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/peter/github/opencode-workflow-kit/scripts/test-integration-contracts.py\", line 56, in test_beads_version_contract\n    mock_run.assert_called_once_with(\n  File \"/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/unittest/mock.py\", line 918, in assert_called_once_with\n    raise AssertionError(msg)\nAssertionError: Expected 'run' to be called once. Called 2 times.\nCalls: [call(['bd', '--version'], check=True, capture_output=True, timeout=5, cwd=PosixPath('/var/folders/n6/4nb1pqwj7gl675t1jvxlml_m0000gn/T/tmpms_ojebm')),\n call(['bd', '--version'], check=True, capture_output=True, timeout=5, cwd=PosixPath('/var/folders/n6/4nb1pqwj7gl675t1jvxlml_m0000gn/T/tmpms_ojebm'))].\n\n======================================================================\nFAIL: test_graceful_degradation_contract (__main__.TestIntegrationContract)\nTest graceful degradation when systems unavailable.\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/peter/github/opencode-workflow-kit/scripts/test-integration-contracts.py\", line 420, in test_graceful_degradation_contract\n    self.assertFalse(\nAssertionError: True is not false : Should report beads as unavailable\n\n----------------------------------------------------------------------\nRan 15 tests in 1.263s\n\nFAILED (failures=2)\n",
      "error_details": "test_beads_data_format_contract (__main__.TestBeadsContract)\nTest Beads JSONL follows expected data format. ... ok\ntest_beads_version_contract (__main__.TestBeadsContract)\nTest bd --version follows expected contract. ... FAIL\ntest_beads_version_failure (__main__.TestBeadsContract)\nTest graceful handling when bd command fails. ... ok\ntest_beads_version_missing (__main__.TestBeadsContract)\nTest graceful handling when bd command missing. ... ok\ntest_cody_agent_config_contract (__main__.TestCodyContract)\nTest Cody agent configurations follow expected format. ... ok\ntest_cody_feature_backlog_contract (__main__.TestCodyContract)\nTest Cody feature-backlog.md follows expected format. ... ok\ntest_cody_structure_contract (__main__.TestCodyContract)\nTest Cody PBT follows expected directory structure. ... ok\ntest_cody_structure_missing (__main__.TestCodyContract)\nTest graceful handling when Cody structure missing. ... ok\ntest_adapter_logging_contract (__main__.TestIntegrationContract)\nTest adapter logging follows expected format. ... ok\ntest_graceful_degradation_contract (__main__.TestIntegrationContract)\nTest graceful degradation when systems unavailable. ... FAIL\ntest_non_blocking_contract (__main__.TestIntegrationContract)\nTest integration operations never block. ... ok\ntest_system_status_contract (__main__.TestIntegrationContract)\nTest system status follows expected format. ... ok\ntest_beads_jsonl_contract_violation (__main__.TestContractViolations)\nTest detection of Beads JSONL contract violations. ... ok\ntest_cody_backlog_contract_violation (__main__.TestContractViolations)\nTest detection of Cody backlog contract violations. ... ok\ntest_version_compatibility_violation (__main__.TestContractViolations)\nTest detection of version compatibility violations. ... ok\n\n======================================================================\nFAIL: test_beads_version_contract (__main__.TestBeadsContract)\nTest bd --version follows expected contract.\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/peter/github/opencode-workflow-kit/scripts/test-integration-contracts.py\", line 56, in test_beads_version_contract\n    mock_run.assert_called_once_with(\n  File \"/Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/unittest/mock.py\", line 918, in assert_called_once_with\n    raise AssertionError(msg)\nAssertionError: Expected 'run' to be called once. Called 2 times.\nCalls: [call(['bd', '--version'], check=True, capture_output=True, timeout=5, cwd=PosixPath('/var/folders/n6/4nb1pqwj7gl675t1jvxlml_m0000gn/T/tmpms_ojebm')),\n call(['bd', '--version'], check=True, capture_output=True, timeout=5, cwd=PosixPath('/var/folders/n6/4nb1pqwj7gl675t1jvxlml_m0000gn/T/tmpms_ojebm'))].\n\n======================================================================\nFAIL: test_graceful_degradation_contract (__main__.TestIntegrationContract)\nTest graceful degradation when systems unavailable.\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"/Users/peter/github/opencode-workflow-kit/scripts/test-integration-contracts.py\", line 420, in test_graceful_degradation_contract\n    self.assertFalse(\nAssertionError: True is not false : Should report beads as unavailable\n\n----------------------------------------------------------------------\nRan 15 tests in 1.263s\n\nFAILED (failures=2)\n"
    }
  },
  "summary": {
    "total_suites": 1,
    "run_suites": 1,
    "passed_suites": 0,
    "failed_suites": 1,
    "critical_failures": 1,
    "total_tests": 0,
    "total_failures": 0,
    "total_errors": 1,
    "overall_success": false
  }
}